<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  事件响应链 - ACEfish-Blog
  
  </title>
 <meta name="description" content="学习记录">
 <link href="atom.xml" rel="alternate" title="ACEfish-Blog" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">ACEfish-Blog</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; ACEfish-Blog</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>基础小知识点</label></li>

          
            <li><a title="类簇" href="15828224173019.html">类簇</a></li>
          
            <li><a title="事件响应链" href="15823466354492.html">事件响应链</a></li>
          

      
        <li class="divider"></li>
        <li><label>学习文档</label></li>

          
            <li><a title="WWDC视频" href="15737184394691.html">WWDC视频</a></li>
          

      
        <li class="divider"></li>
        <li><label>Xcode调试</label></li>

          
            <li><a title="Xcode11 调试" href="15737182379260.html">Xcode11 调试</a></li>
          
            <li><a title="Thread Sanitizer" href="15737170765125.html">Thread Sanitizer</a></li>
          
            <li><a title="调试学习" href="15737169032344.html">调试学习</a></li>
          
            <li><a title="Instruments Help" href="15553150729300.html">Instruments Help</a></li>
          
            <li><a title="LLDB" href="15541740415551.html">LLDB</a></li>
          
            <li><a title="使用Debug Memory Graph检查内存泄漏" href="15737141818934.html">使用Debug Memory Graph检查内存泄漏</a></li>
          
            <li><a title="objc_exception_throw" href="15737157610893.html">objc_exception_throw</a></li>
          

      
        <li class="divider"></li>
        <li><label>Test</label></li>

          
            <li><a title="UITest" href="15738009699255.html">UITest</a></li>
          

      
        <li class="divider"></li>
        <li><label>音频</label></li>

          
            <li><a title="构造Audio Unit应用" href="15776919276552.html">构造Audio Unit应用</a></li>
          
            <li><a title="Audio Unit 工作原理" href="15773512971221.html">Audio Unit 工作原理</a></li>
          
            <li><a title="CoreAudio" href="15772759555662.html">CoreAudio</a></li>
          

      
        <li class="divider"></li>
        <li><label>视频</label></li>

          
            <li><a title="" href="15819548506333.html"></a></li>
          
            <li><a title="优化OpenGL ES app" href="15819546549863.html">优化OpenGL ES app</a></li>
          
            <li><a title="OpenGL ES 设计指南" href="15818686781056.html">OpenGL ES 设计指南</a></li>
          
            <li><a title="多任务，高分辨率和其他iOS特性" href="15819543966360.html">多任务，高分辨率和其他iOS特性</a></li>
          
            <li><a title="OpenGL ES绘制进阶" href="15818491245054.html">OpenGL ES绘制进阶</a></li>
          
            <li><a title="集成并启动OpenGL ES应用程序" href="15784535760978.html">集成并启动OpenGL ES应用程序</a></li>
          
            <li><a title="OpenGL ES" href="15783816080792.html">OpenGL ES</a></li>
          

      
        <li class="divider"></li>
        <li><label>音视频</label></li>

          
            <li><a title="RTMP协议" href="15752937246759.html">RTMP协议</a></li>
          
            <li><a title="音频编码 && 视频编码" href="15754282826146.html">音频编码 && 视频编码</a></li>
          
            <li><a title="音视频编码理论" href="15752666875563.html">音视频编码理论</a></li>
          
            <li><a title="FFmpeg" href="15752573852650.html">FFmpeg</a></li>
          

      
        <li class="divider"></li>
        <li><label>iOS13&&Xcode11</label></li>

          
            <li><a title="暗黑模式适配" href="15771854107525.html">暗黑模式适配</a></li>
          
            <li><a title="SceneDelegate In Xcode11" href="15724059867930.html">SceneDelegate In Xcode11</a></li>
          

      
        <li class="divider"></li>
        <li><label>iOS编译流程</label></li>

          
            <li><a title="AST" href="15771995229810.html">AST</a></li>
          
            <li><a title="otool命令" href="15554889031358.html">otool命令</a></li>
          
            <li><a title="Link Map File && dSYM" href="15541067561617.html">Link Map File && dSYM</a></li>
          
            <li><a title="Swift编译流" href="15541064037153.html">Swift编译流</a></li>
          
            <li><a title="LLVM Backend" href="15541023147431.html">LLVM Backend</a></li>
          
            <li><a title="Clang库&&插件" href="15541003911598.html">Clang库&&插件</a></li>
          
            <li><a title="Clang Attributes" href="15540426044478.html">Clang Attributes</a></li>
          
            <li><a title="Clang CFE" href="15540375355169.html">Clang CFE</a></li>
          
            <li><a title="CodeGen IR LLVM" href="15540299299293.html">CodeGen IR LLVM</a></li>
          
            <li><a title="Clang Static Analyzer静态代码分析" href="15539605071421.html">Clang Static Analyzer静态代码分析</a></li>
          
            <li><a title="Target在build中的控制" href="15539566553487.html">Target在build中的控制</a></li>
          
            <li><a title="App程序编译的完整流程" href="15538518127841.html">App程序编译的完整流程</a></li>
          
            <li><a title="iOS 编译 Clang 和 LLVM" href="15537643467312.html">iOS 编译 Clang 和 LLVM</a></li>
          
            <li><a title="基础知识" href="15538277002309.html">基础知识</a></li>
          

      
        <li class="divider"></li>
        <li><label>dyld(程序启动)</label></li>

          
            <li><a title="main函数之前发生了什么" href="15549543814877.html">main函数之前发生了什么</a></li>
          
            <li><a title="dyld动态链接" href="15541213204265.html">dyld动态链接</a></li>
          
            <li><a title="静态库与动态库" href="15542163059530.html">静态库与动态库</a></li>
          

      
        <li class="divider"></li>
        <li><label>Mach-O文件了解</label></li>

          
            <li><a title="Mach-O文件" href="15541132912435.html">Mach-O文件</a></li>
          
            <li><a title="Mach-O文件结构" href="15559005276972.html">Mach-O文件结构</a></li>
          

      
        <li class="divider"></li>
        <li><label>设计模式架构谈(摘录)</label></li>

          
            <li><a title="MVVM的思考" href="15537640909732.html">MVVM的思考</a></li>
          
            <li><a title="本地持久化" href="15537578174693.html">本地持久化</a></li>
          
            <li><a title="网络层架构" href="15536896283260.html">网络层架构</a></li>
          
            <li><a title="View层的架构" href="15536843996723.html">View层的架构</a></li>
          
            <li><a title="架构" href="15536896276061.html">架构</a></li>
          

      
        <li class="divider"></li>
        <li><label>组件化开发学习</label></li>

          
            <li><a title="常用工程架构" href="15541349160713.html">常用工程架构</a></li>
          
            <li><a title="读 戴铭--项目架构设计" href="15536759822609.html">读 戴铭--项目架构设计</a></li>
          
            <li><a title="Beehive学习" href="15536741821323.html">Beehive学习</a></li>
          

      
        <li class="divider"></li>
        <li><label>GPU&&渲染</label></li>

          
            <li><a title="渲染" href="15643878437057.html">渲染</a></li>
          
            <li><a title="离屏渲染" href="15644708593081.html">离屏渲染</a></li>
          
            <li><a title="iOS保持界面流畅的技巧" href="15719889525556.html">iOS保持界面流畅的技巧</a></li>
          
            <li><a title="图像解压缩" href="15646478175328.html">图像解压缩</a></li>
          
            <li><a title="Quartz 2D Programming Guide" href="15736268841019.html">Quartz 2D Programming Guide</a></li>
          

      
        <li class="divider"></li>
        <li><label>多线程</label></li>

          
            <li><a title="GCD任务和队列" href="15547801359492.html">GCD任务和队列</a></li>
          
            <li><a title="dispatch_block_t" href="15548649461552.html">dispatch_block_t</a></li>
          
            <li><a title="GCD的常用功能" href="15548054751703.html">GCD的常用功能</a></li>
          
            <li><a title="Dispatch_Source" href="15548993387688.html">Dispatch_Source</a></li>
          
            <li><a title="NSOperation" href="14873146865194.html">NSOperation</a></li>
          
            <li><a title="并发编程中的问题" href="14872918920673.html">并发编程中的问题</a></li>
          
            <li><a title="并发编程实践" href="14872969075485.html">并发编程实践</a></li>
          
            <li><a title="mach_absolute_time" href="15548976524741.html">mach_absolute_time</a></li>
          

      
        <li class="divider"></li>
        <li><label>线程安全&&锁</label></li>

          
            <li><a title="iOS 开发中的九种锁" href="14964011409915.html">iOS 开发中的九种锁</a></li>
          
            <li><a title="线程安全与非线程安全" href="15543839316178.html">线程安全与非线程安全</a></li>
          
            <li><a title="线程死锁" href="15541369631882.html">线程死锁</a></li>
          

      
        <li class="divider"></li>
        <li><label>RunLoop</label></li>

          
            <li><a title="深入理解RunLoop" href="15543697527242.html">深入理解RunLoop</a></li>
          
            <li><a title="RunLoop使用示例" href="14873195104181.html">RunLoop使用示例</a></li>
          
            <li><a title="拾遗" href="15547054235829.html">拾遗</a></li>
          
            <li><a title="停止RunLoop" href="15547780131307.html">停止RunLoop</a></li>
          
            <li><a title="预留学习资料" href="15547785259859.html">预留学习资料</a></li>
          

      
        <li class="divider"></li>
        <li><label>KVC&&KVO</label></li>

          
            <li><a title="KVC" href="15549735665033.html">KVC</a></li>
          
            <li><a title="KVC 规范" href="15730427169355.html">KVC 规范</a></li>
          
            <li><a title="KVO" href="15551517319694.html">KVO</a></li>
          
            <li><a title="ios KVO 底层实现原理" href="15730245099730.html">ios KVO 底层实现原理</a></li>
          

      
        <li class="divider"></li>
        <li><label>runtime学习</label></li>

          
            <li><a title="苹果官方运行时源码" href="15543581687703.html">苹果官方运行时源码</a></li>
          
            <li><a title="Objc Runtime" href="14877247419344.html">Objc Runtime</a></li>
          
            <li><a title="类与对象" href="14877303400153.html">类与对象</a></li>
          
            <li><a title="运行时实例:" href="14877347224030.html">运行时实例:</a></li>
          
            <li><a title="方法与消息" href="14878317569666.html">方法与消息</a></li>
          
            <li><a title="成员变量与属性" href="14878317610028.html">成员变量与属性</a></li>
          
            <li><a title="Method Swizzling" href="14879241904124.html">Method Swizzling</a></li>
          
            <li><a title="协议与分类" href="14879278087290.html">协议与分类</a></li>
          
            <li><a title="拾遗" href="14882730004281.html">拾遗</a></li>
          

      
        <li class="divider"></li>
        <li><label>OC高级编程-内存管理</label></li>

          
            <li><a title="ARC的实现" href="15665293554942.html">ARC的实现</a></li>
          
            <li><a title="ARC中类属性小结" href="15554809772320.html">ARC中类属性小结</a></li>
          
            <li><a title="Foundation、Core Foundation框架对象" href="15554693626882.html">Foundation、Core Foundation框架对象</a></li>
          
            <li><a title="ARC使用规则" href="15554670188763.html">ARC使用规则</a></li>
          
            <li><a title="ARC的修饰符" href="15553988088853.html">ARC的修饰符</a></li>
          
            <li><a title="引用计数" href="15663537912476.html">引用计数</a></li>
          

      
        <li class="divider"></li>
        <li><label>官方文档-内存管理</label></li>

          
            <li><a title="内存管理介绍" href="15552393320703.html">内存管理介绍</a></li>
          
            <li><a title="Cocoa基本内存管理规则" href="15553153173429.html">Cocoa基本内存管理规则</a></li>
          
            <li><a title="内存管理实践" href="15553160787382.html">内存管理实践</a></li>
          
            <li><a title="autorelease && autorelease pool block" href="15553791452907.html">autorelease && autorelease pool block</a></li>
          
            <li><a title="dealloc何时调用" href="15553079699012.html">dealloc何时调用</a></li>
          
            <li><a title="NSZone" href="15553927659857.html">NSZone</a></li>
          

      
        <li class="divider"></li>
        <li><label>block学习</label></li>

          
            <li><a title="Blocks" href="15668020933125.html">Blocks</a></li>
          
            <li><a title="Blocks的实现" href="15668021082247.html">Blocks的实现</a></li>
          
            <li><a title="Block存储" href="15671439508053.html">Block存储</a></li>
          
            <li><a title="Block值捕获和__block总结" href="15651698942201.html">Block值捕获和__block总结</a></li>
          
            <li><a title="Block" href="15541369129721.html">Block</a></li>
          

      
        <li class="divider"></li>
        <li><label>网络</label></li>

          
            <li><a title="NSURL" href="14968918049808.html">NSURL</a></li>
          
            <li><a title="使用 NSURLProtocol 拦截 HTTP 请求" href="15681830257275.html">使用 NSURLProtocol 拦截 HTTP 请求</a></li>
          
            <li><a title="OHHTTPStubs Mock网络请求" href="15681901666048.html">OHHTTPStubs Mock网络请求</a></li>
          

      
        <li class="divider"></li>
        <li><label>fishhook</label></li>

          
            <li><a title="fishhook" href="15731958399871.html">fishhook</a></li>
          

      
        <li class="divider"></li>
        <li><label>SDWebImage</label></li>

          
            <li><a title="SDWebImage源码分析" href="15732813859540.html">SDWebImage源码分析</a></li>
          

      
        <li class="divider"></li>
        <li><label>AFNetworking</label></li>

          
            <li><a title="AFSecurityPolicy" href="15680194937623.html">AFSecurityPolicy</a></li>
          
            <li><a title="AFNetworkReachabilityManager" href="15680125238227.html">AFNetworkReachabilityManager</a></li>
          
            <li><a title="AFURLSerialization" href="15677400518331.html">AFURLSerialization</a></li>
          
            <li><a title="AFURLSessionManager" href="15676621460215.html">AFURLSessionManager</a></li>
          
            <li><a title="AFNetworking" href="15675682575589.html">AFNetworking</a></li>
          

      
        <li class="divider"></li>
        <li><label>AsyncDisplayKit</label></li>

          
            <li><a title="Collections and asynchronous updates" href="15719000093976.html">Collections and asynchronous updates</a></li>
          
            <li><a title="Layout Specs" href="15710248960458.html">Layout Specs</a></li>
          
            <li><a title="Node Lifecycle" href="15707800044047.html">Node Lifecycle</a></li>
          
            <li><a title="线程" href="15707737201639.html">线程</a></li>
          
            <li><a title="Nodes" href="15698393226216.html">Nodes</a></li>
          
            <li><a title="Node Containers" href="15697458035343.html">Node Containers</a></li>
          
            <li><a title="先进技术" href="15697378626983.html">先进技术</a></li>
          
            <li><a title="工具" href="15695667474220.html">工具</a></li>
          
            <li><a title="优化" href="15694018519470.html">优化</a></li>
          
            <li><a title="Teture的便捷性" href="15693141187091.html">Teture的便捷性</a></li>
          
            <li><a title="Layout" href="15688983880412.html">Layout</a></li>
          
            <li><a title="子类" href="15686206334500.html">子类</a></li>
          
            <li><a title="Node" href="15686140907064.html">Node</a></li>
          
            <li><a title="智能预加载" href="15682782807154.html">智能预加载</a></li>
          
            <li><a title="Texture" href="15681914341057.html">Texture</a></li>
          
            <li><a title="AsyncDisplayKit" href="15645543599204.html">AsyncDisplayKit</a></li>
          

      
        <li class="divider"></li>
        <li><label>ReactnativeCocoa</label></li>

          
            <li><a title="Reactive Cocoa Tutorial" href="15647325396059.html">Reactive Cocoa Tutorial</a></li>
          
            <li><a title="RACDelegateProxy" href="15611008346251.html">RACDelegateProxy</a></li>
          
            <li><a title="RACChannel" href="15609354619260.html">RACChannel</a></li>
          
            <li><a title="RACMulticastConnection: NSObject" href="15609234167437.html">RACMulticastConnection: NSObject</a></li>
          
            <li><a title="RACCommand: NSObject" href="15608261485816.html">RACCommand: NSObject</a></li>
          
            <li><a title="RACSignal信号的订阅与发送" href="15604257329990.html">RACSignal信号的订阅与发送</a></li>
          
            <li><a title="RACSignal" href="15578383647199.html">RACSignal</a></li>
          
            <li><a title="RACStream" href="15578193513091.html">RACStream</a></li>
          
            <li><a title="ReactObjc常用" href="15529084547270.html">ReactObjc常用</a></li>
          
            <li><a title="ReactiveObjC" href="15459662586152.html">ReactiveObjC</a></li>
          
            <li><a title="ReactiveObjC" href="15450317285396.html">ReactiveObjC</a></li>
          
            <li><a title="ReactiveCocoa 版本" href="15446921413334.html">ReactiveCocoa 版本</a></li>
          
            <li><a title="基础" href="15446723749030.html">基础</a></li>
          

      
        <li class="divider"></li>
        <li><label>PromiseKit</label></li>

          
            <li><a title="官方文档" href="15718858302183.html">官方文档</a></li>
          

      
        <li class="divider"></li>
        <li><label>项目监控</label></li>

          
            <li><a title="MatrixiOS学习" href="15560883411509.html">MatrixiOS学习</a></li>
          
            <li><a title="内存监控" href="15556458372058.html">内存监控</a></li>
          
            <li><a title="线程回溯和符号化" href="15560068598022.html">线程回溯和符号化</a></li>
          
            <li><a title="KSCrash" href="15559026860989.html">KSCrash</a></li>
          
            <li><a title="崩溃日志信息以及符号化" href="15560067896432.html">崩溃日志信息以及符号化</a></li>
          
            <li><a title="后台任务超时崩溃" href="15555568072278.html">后台任务超时崩溃</a></li>
          
            <li><a title="Crash收集" href="15559241621683.html">Crash收集</a></li>
          
            <li><a title="iOS模拟内存警告" href="15556552302925.html">iOS模拟内存警告</a></li>
          

      
        <li class="divider"></li>
        <li><label>APP体积优化</label></li>

          
            <li><a title="Objective-C二进制瘦身" href="15822611342755.html">Objective-C二进制瘦身</a></li>
          
            <li><a title="包大小" href="15645609012102.html">包大小</a></li>
          

      
        <li class="divider"></li>
        <li><label>启动优化</label></li>

          
            <li><a title="App启动优化" href="15771850071304.html">App启动优化</a></li>
          
            <li><a title="APP启动优化" href="15542146663946.html">APP启动优化</a></li>
          

      
        <li class="divider"></li>
        <li><label>自动化测试</label></li>

          
            <li><a title="OCMock" href="14873831706932.html">OCMock</a></li>
          
            <li><a title="UI测试" href="14872305472033.html">UI测试</a></li>
          
            <li><a title="测试" href="14872162581601.html">测试</a></li>
          
            <li><a title="XCTest单元测试" href="14871449062159.html">XCTest单元测试</a></li>
          

      
        <li class="divider"></li>
        <li><label>iOS-CoreAnimation</label></li>

          
            <li><a title="专用图层" href="14896343426276.html">专用图层</a></li>
          
            <li><a title="图层几何学、视觉效果" href="14892022301750.html">图层几何学、视觉效果</a></li>
          
            <li><a title="图层树和寄宿图" href="14883679213714.html">图层树和寄宿图</a></li>
          
            <li><a title="变换" href="14894054496048.html">变换</a></li>
          
            <li><a title="基于定时器的动画" href="14913623029277.html">基于定时器的动画</a></li>
          
            <li><a title="缓冲" href="14906168166224.html">缓冲</a></li>
          
            <li><a title="图层性能" href="14951065647732.html">图层性能</a></li>
          
            <li><a title="图层时间" href="14905958336865.html">图层时间</a></li>
          
            <li><a title="图像IO" href="14940350647350.html">图像IO</a></li>
          
            <li><a title="显式动画" href="14903384285214.html">显式动画</a></li>
          
            <li><a title="隐式动画" href="14901598468257.html">隐式动画</a></li>
          
            <li><a title="高效绘图" href="14939015823586.html">高效绘图</a></li>
          
            <li><a title="性能调优" href="14924196525709.html">性能调优</a></li>
          
            <li><a title="动画" href="14921642710849.html">动画</a></li>
          
            <li><a title="Core Animation" href="14892022094971.html">Core Animation</a></li>
          
            <li><a title="常用动画示例" href="14925128921601.html">常用动画示例</a></li>
          

      
        <li class="divider"></li>
        <li><label>CoreGraphic</label></li>

          
            <li><a title="CGColor" href="15350923380421.html">CGColor</a></li>
          
            <li><a title="CGColorSpace" href="15350771796806.html">CGColorSpace</a></li>
          
            <li><a title="CGBlendMode" href="15350068830702.html">CGBlendMode</a></li>
          

      
        <li class="divider"></li>
        <li><label>ARKit</label></li>

          
            <li><a title="实战:ARKit捕捉平面" href="15082392311480.html">实战:ARKit捕捉平面</a></li>
          
            <li><a title="ARCamera" href="15082385455420.html">ARCamera</a></li>
          
            <li><a title="ARSession" href="15082349866219.html">ARSession</a></li>
          
            <li><a title="ARSCNView" href="15082316038998.html">ARSCNView</a></li>
          
            <li><a title="ARKit框架API简介" href="15082286345415.html">ARKit框架API简介</a></li>
          
            <li><a title="SceneKit" href="15077240642559.html">SceneKit</a></li>
          
            <li><a title="ARKit" href="15077234771115.html">ARKit</a></li>
          

      
        <li class="divider"></li>
        <li><label>git</label></li>

          
            <li><a title="Git" href="15284514278903.html">Git</a></li>
          

      
        <li class="divider"></li>
        <li><label>Cocoapods</label></li>

          
            <li><a title="pod repo update" href="15556625620569.html">pod repo update</a></li>
          
            <li><a title="补充知识" href="15538424631757.html">补充知识</a></li>
          
            <li><a title="制作自己的Cocoapods" href="15535911821974.html">制作自己的Cocoapods</a></li>
          
            <li><a title="Cocoapods使用" href="15535750586068.html">Cocoapods使用</a></li>
          

      
        <li class="divider"></li>
        <li><label>拾遗</label></li>

          
            <li><a title="" href="15724227215760.html"></a></li>
          

      
        <li class="divider"></li>
        <li><label>Swift基础知识</label></li>

          
            <li><a title="高级运算符" href="15059300219793.html">高级运算符</a></li>
          
            <li><a title="访问控制" href="15057532270985.html">访问控制</a></li>
          
            <li><a title="内存安全" href="15660380397380.html">内存安全</a></li>
          
            <li><a title="自动引用计数" href="15028525854956.html">自动引用计数</a></li>
          
            <li><a title="不透明类型" href="15659410303124.html">不透明类型</a></li>
          
            <li><a title="泛型" href="15052932669633.html">泛型</a></li>
          
            <li><a title="协议" href="15047511695312.html">协议</a></li>
          
            <li><a title="扩展" href="15042587690391.html">扩展</a></li>
          
            <li><a title="嵌套类型" href="15042543172572.html">嵌套类型</a></li>
          
            <li><a title="类型转换" href="15037348375137.html">类型转换</a></li>
          
            <li><a title="错误处理" href="15034731740974.html">错误处理</a></li>
          
            <li><a title="可选链式调用" href="15031302948355.html">可选链式调用</a></li>
          
            <li><a title="析构过程" href="15025006795297.html">析构过程</a></li>
          
            <li><a title="构造过程" href="15020961612430.html">构造过程</a></li>
          
            <li><a title="继承" href="15018175799489.html">继承</a></li>
          
            <li><a title="下标" href="15017615739867.html">下标</a></li>
          
            <li><a title="方法" href="15017296324997.html">方法</a></li>
          
            <li><a title="属性" href="15015839505859.html">属性</a></li>
          
            <li><a title="类和结构体" href="15005513837564.html">类和结构体</a></li>
          
            <li><a title="枚举" href="15003778819226.html">枚举</a></li>
          
            <li><a title="闭包" href="14993105877642.html">闭包</a></li>
          
            <li><a title="函数 Functions" href="14986177362678.html">函数 Functions</a></li>
          
            <li><a title="控制流" href="14980952471508.html">控制流</a></li>
          
            <li><a title="集合类型" href="14978615246204.html">集合类型</a></li>
          
            <li><a title="字符串和字符" href="14976096897839.html">字符串和字符</a></li>
          
            <li><a title="Swift 基本运算符" href="14974389141976.html">Swift 基本运算符</a></li>
          
            <li><a title="Swift 基础部分" href="14968373667230.html">Swift 基础部分</a></li>
          
            <li><a title="swift简介" href="14966582354331.html">swift简介</a></li>
          

      
        <li class="divider"></li>
        <li><label>计算机编程</label></li>

          
            <li><a title="网络通信" href="14982190720101.html">网络通信</a></li>
          
            <li><a title="C语言" href="14876675609253.html">C语言</a></li>
          

      
        <li class="divider"></li>
        <li><label>JavaScript学习笔记</label></li>

          

      
        <li class="divider"></li>
        <li><label>React-Native</label></li>

          
            <li><a title="Stack Navigation" href="15312926184354.html">Stack Navigation</a></li>
          
            <li><a title="混合开发(OC)" href="15304988629042.html">混合开发(OC)</a></li>
          
            <li><a title="组件属性一" href="15293961047296.html">组件属性一</a></li>
          
            <li><a title="补充" href="15290351401483.html">补充</a></li>
          
            <li><a title="导航页面" href="15289587744708.html">导航页面</a></li>
          
            <li><a title="状态机" href="15288713693530.html">状态机</a></li>
          

      
        <li class="divider"></li>
        <li><label>Python</label></li>

          
            <li><a title="常见内置模块" href="15332875866545.html">常见内置模块</a></li>
          
            <li><a title="常用第三方模块" href="15331955872244.html">常用第三方模块</a></li>
          
            <li><a title="正则表达式" href="15331933928026.html">正则表达式</a></li>
          
            <li><a title="进程&&线程" href="15331071952550.html">进程&&线程</a></li>
          
            <li><a title="IO编程" href="15329386758024.html">IO编程</a></li>
          
            <li><a title="错误、调试、测试" href="15325716345284.html">错误、调试、测试</a></li>
          
            <li><a title="面对对象高级编程" href="15324890369623.html">面对对象高级编程</a></li>
          
            <li><a title="面对对象编程" href="15324145349319.html">面对对象编程</a></li>
          
            <li><a title="模块" href="15324005146874.html">模块</a></li>
          
            <li><a title="函数式编程" href="15320795459657.html">函数式编程</a></li>
          
            <li><a title="高级特性" href="15319012648780.html">高级特性</a></li>
          
            <li><a title="函数" href="15318121291068.html">函数</a></li>
          
            <li><a title="语句" href="15317414032911.html">语句</a></li>
          
            <li><a title="Python基础" href="15317258769792.html">Python基础</a></li>
          

      
        <li class="divider"></li>
        <li><label>算法读书笔记</label></li>

          
            <li><a title="背包、队列、栈" href="15676039246412.html">背包、队列、栈</a></li>
          
            <li><a title="算法分析" href="15676055128194.html">算法分析</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>基础小知识点</span></li>
                        
                          <li><a title="类簇" href="15828224173019.html">类簇</a></li>
                        
                          <li><a title="事件响应链" href="15823466354492.html">事件响应链</a></li>
                        

                    
                      <li class="side-title"><span>学习文档</span></li>
                        
                          <li><a title="WWDC视频" href="15737184394691.html">WWDC视频</a></li>
                        

                    
                      <li class="side-title"><span>Xcode调试</span></li>
                        
                          <li><a title="Xcode11 调试" href="15737182379260.html">Xcode11 调试</a></li>
                        
                          <li><a title="Thread Sanitizer" href="15737170765125.html">Thread Sanitizer</a></li>
                        
                          <li><a title="调试学习" href="15737169032344.html">调试学习</a></li>
                        
                          <li><a title="Instruments Help" href="15553150729300.html">Instruments Help</a></li>
                        
                          <li><a title="LLDB" href="15541740415551.html">LLDB</a></li>
                        
                          <li><a title="使用Debug Memory Graph检查内存泄漏" href="15737141818934.html">使用Debug Memory Graph检查内存泄漏</a></li>
                        
                          <li><a title="objc_exception_throw" href="15737157610893.html">objc_exception_throw</a></li>
                        

                    
                      <li class="side-title"><span>Test</span></li>
                        
                          <li><a title="UITest" href="15738009699255.html">UITest</a></li>
                        

                    
                      <li class="side-title"><span>音频</span></li>
                        
                          <li><a title="构造Audio Unit应用" href="15776919276552.html">构造Audio Unit应用</a></li>
                        
                          <li><a title="Audio Unit 工作原理" href="15773512971221.html">Audio Unit 工作原理</a></li>
                        
                          <li><a title="CoreAudio" href="15772759555662.html">CoreAudio</a></li>
                        

                    
                      <li class="side-title"><span>视频</span></li>
                        
                          <li><a title="" href="15819548506333.html"></a></li>
                        
                          <li><a title="优化OpenGL ES app" href="15819546549863.html">优化OpenGL ES app</a></li>
                        
                          <li><a title="OpenGL ES 设计指南" href="15818686781056.html">OpenGL ES 设计指南</a></li>
                        
                          <li><a title="多任务，高分辨率和其他iOS特性" href="15819543966360.html">多任务，高分辨率和其他iOS特性</a></li>
                        
                          <li><a title="OpenGL ES绘制进阶" href="15818491245054.html">OpenGL ES绘制进阶</a></li>
                        
                          <li><a title="集成并启动OpenGL ES应用程序" href="15784535760978.html">集成并启动OpenGL ES应用程序</a></li>
                        
                          <li><a title="OpenGL ES" href="15783816080792.html">OpenGL ES</a></li>
                        

                    
                      <li class="side-title"><span>音视频</span></li>
                        
                          <li><a title="RTMP协议" href="15752937246759.html">RTMP协议</a></li>
                        
                          <li><a title="音频编码 && 视频编码" href="15754282826146.html">音频编码 && 视频编码</a></li>
                        
                          <li><a title="音视频编码理论" href="15752666875563.html">音视频编码理论</a></li>
                        
                          <li><a title="FFmpeg" href="15752573852650.html">FFmpeg</a></li>
                        

                    
                      <li class="side-title"><span>iOS13&&Xcode11</span></li>
                        
                          <li><a title="暗黑模式适配" href="15771854107525.html">暗黑模式适配</a></li>
                        
                          <li><a title="SceneDelegate In Xcode11" href="15724059867930.html">SceneDelegate In Xcode11</a></li>
                        

                    
                      <li class="side-title"><span>iOS编译流程</span></li>
                        
                          <li><a title="AST" href="15771995229810.html">AST</a></li>
                        
                          <li><a title="otool命令" href="15554889031358.html">otool命令</a></li>
                        
                          <li><a title="Link Map File && dSYM" href="15541067561617.html">Link Map File && dSYM</a></li>
                        
                          <li><a title="Swift编译流" href="15541064037153.html">Swift编译流</a></li>
                        
                          <li><a title="LLVM Backend" href="15541023147431.html">LLVM Backend</a></li>
                        
                          <li><a title="Clang库&&插件" href="15541003911598.html">Clang库&&插件</a></li>
                        
                          <li><a title="Clang Attributes" href="15540426044478.html">Clang Attributes</a></li>
                        
                          <li><a title="Clang CFE" href="15540375355169.html">Clang CFE</a></li>
                        
                          <li><a title="CodeGen IR LLVM" href="15540299299293.html">CodeGen IR LLVM</a></li>
                        
                          <li><a title="Clang Static Analyzer静态代码分析" href="15539605071421.html">Clang Static Analyzer静态代码分析</a></li>
                        
                          <li><a title="Target在build中的控制" href="15539566553487.html">Target在build中的控制</a></li>
                        
                          <li><a title="App程序编译的完整流程" href="15538518127841.html">App程序编译的完整流程</a></li>
                        
                          <li><a title="iOS 编译 Clang 和 LLVM" href="15537643467312.html">iOS 编译 Clang 和 LLVM</a></li>
                        
                          <li><a title="基础知识" href="15538277002309.html">基础知识</a></li>
                        

                    
                      <li class="side-title"><span>dyld(程序启动)</span></li>
                        
                          <li><a title="main函数之前发生了什么" href="15549543814877.html">main函数之前发生了什么</a></li>
                        
                          <li><a title="dyld动态链接" href="15541213204265.html">dyld动态链接</a></li>
                        
                          <li><a title="静态库与动态库" href="15542163059530.html">静态库与动态库</a></li>
                        

                    
                      <li class="side-title"><span>Mach-O文件了解</span></li>
                        
                          <li><a title="Mach-O文件" href="15541132912435.html">Mach-O文件</a></li>
                        
                          <li><a title="Mach-O文件结构" href="15559005276972.html">Mach-O文件结构</a></li>
                        

                    
                      <li class="side-title"><span>设计模式架构谈(摘录)</span></li>
                        
                          <li><a title="MVVM的思考" href="15537640909732.html">MVVM的思考</a></li>
                        
                          <li><a title="本地持久化" href="15537578174693.html">本地持久化</a></li>
                        
                          <li><a title="网络层架构" href="15536896283260.html">网络层架构</a></li>
                        
                          <li><a title="View层的架构" href="15536843996723.html">View层的架构</a></li>
                        
                          <li><a title="架构" href="15536896276061.html">架构</a></li>
                        

                    
                      <li class="side-title"><span>组件化开发学习</span></li>
                        
                          <li><a title="常用工程架构" href="15541349160713.html">常用工程架构</a></li>
                        
                          <li><a title="读 戴铭--项目架构设计" href="15536759822609.html">读 戴铭--项目架构设计</a></li>
                        
                          <li><a title="Beehive学习" href="15536741821323.html">Beehive学习</a></li>
                        

                    
                      <li class="side-title"><span>GPU&&渲染</span></li>
                        
                          <li><a title="渲染" href="15643878437057.html">渲染</a></li>
                        
                          <li><a title="离屏渲染" href="15644708593081.html">离屏渲染</a></li>
                        
                          <li><a title="iOS保持界面流畅的技巧" href="15719889525556.html">iOS保持界面流畅的技巧</a></li>
                        
                          <li><a title="图像解压缩" href="15646478175328.html">图像解压缩</a></li>
                        
                          <li><a title="Quartz 2D Programming Guide" href="15736268841019.html">Quartz 2D Programming Guide</a></li>
                        

                    
                      <li class="side-title"><span>多线程</span></li>
                        
                          <li><a title="GCD任务和队列" href="15547801359492.html">GCD任务和队列</a></li>
                        
                          <li><a title="dispatch_block_t" href="15548649461552.html">dispatch_block_t</a></li>
                        
                          <li><a title="GCD的常用功能" href="15548054751703.html">GCD的常用功能</a></li>
                        
                          <li><a title="Dispatch_Source" href="15548993387688.html">Dispatch_Source</a></li>
                        
                          <li><a title="NSOperation" href="14873146865194.html">NSOperation</a></li>
                        
                          <li><a title="并发编程中的问题" href="14872918920673.html">并发编程中的问题</a></li>
                        
                          <li><a title="并发编程实践" href="14872969075485.html">并发编程实践</a></li>
                        
                          <li><a title="mach_absolute_time" href="15548976524741.html">mach_absolute_time</a></li>
                        

                    
                      <li class="side-title"><span>线程安全&&锁</span></li>
                        
                          <li><a title="iOS 开发中的九种锁" href="14964011409915.html">iOS 开发中的九种锁</a></li>
                        
                          <li><a title="线程安全与非线程安全" href="15543839316178.html">线程安全与非线程安全</a></li>
                        
                          <li><a title="线程死锁" href="15541369631882.html">线程死锁</a></li>
                        

                    
                      <li class="side-title"><span>RunLoop</span></li>
                        
                          <li><a title="深入理解RunLoop" href="15543697527242.html">深入理解RunLoop</a></li>
                        
                          <li><a title="RunLoop使用示例" href="14873195104181.html">RunLoop使用示例</a></li>
                        
                          <li><a title="拾遗" href="15547054235829.html">拾遗</a></li>
                        
                          <li><a title="停止RunLoop" href="15547780131307.html">停止RunLoop</a></li>
                        
                          <li><a title="预留学习资料" href="15547785259859.html">预留学习资料</a></li>
                        

                    
                      <li class="side-title"><span>KVC&&KVO</span></li>
                        
                          <li><a title="KVC" href="15549735665033.html">KVC</a></li>
                        
                          <li><a title="KVC 规范" href="15730427169355.html">KVC 规范</a></li>
                        
                          <li><a title="KVO" href="15551517319694.html">KVO</a></li>
                        
                          <li><a title="ios KVO 底层实现原理" href="15730245099730.html">ios KVO 底层实现原理</a></li>
                        

                    
                      <li class="side-title"><span>runtime学习</span></li>
                        
                          <li><a title="苹果官方运行时源码" href="15543581687703.html">苹果官方运行时源码</a></li>
                        
                          <li><a title="Objc Runtime" href="14877247419344.html">Objc Runtime</a></li>
                        
                          <li><a title="类与对象" href="14877303400153.html">类与对象</a></li>
                        
                          <li><a title="运行时实例:" href="14877347224030.html">运行时实例:</a></li>
                        
                          <li><a title="方法与消息" href="14878317569666.html">方法与消息</a></li>
                        
                          <li><a title="成员变量与属性" href="14878317610028.html">成员变量与属性</a></li>
                        
                          <li><a title="Method Swizzling" href="14879241904124.html">Method Swizzling</a></li>
                        
                          <li><a title="协议与分类" href="14879278087290.html">协议与分类</a></li>
                        
                          <li><a title="拾遗" href="14882730004281.html">拾遗</a></li>
                        

                    
                      <li class="side-title"><span>OC高级编程-内存管理</span></li>
                        
                          <li><a title="ARC的实现" href="15665293554942.html">ARC的实现</a></li>
                        
                          <li><a title="ARC中类属性小结" href="15554809772320.html">ARC中类属性小结</a></li>
                        
                          <li><a title="Foundation、Core Foundation框架对象" href="15554693626882.html">Foundation、Core Foundation框架对象</a></li>
                        
                          <li><a title="ARC使用规则" href="15554670188763.html">ARC使用规则</a></li>
                        
                          <li><a title="ARC的修饰符" href="15553988088853.html">ARC的修饰符</a></li>
                        
                          <li><a title="引用计数" href="15663537912476.html">引用计数</a></li>
                        

                    
                      <li class="side-title"><span>官方文档-内存管理</span></li>
                        
                          <li><a title="内存管理介绍" href="15552393320703.html">内存管理介绍</a></li>
                        
                          <li><a title="Cocoa基本内存管理规则" href="15553153173429.html">Cocoa基本内存管理规则</a></li>
                        
                          <li><a title="内存管理实践" href="15553160787382.html">内存管理实践</a></li>
                        
                          <li><a title="autorelease && autorelease pool block" href="15553791452907.html">autorelease && autorelease pool block</a></li>
                        
                          <li><a title="dealloc何时调用" href="15553079699012.html">dealloc何时调用</a></li>
                        
                          <li><a title="NSZone" href="15553927659857.html">NSZone</a></li>
                        

                    
                      <li class="side-title"><span>block学习</span></li>
                        
                          <li><a title="Blocks" href="15668020933125.html">Blocks</a></li>
                        
                          <li><a title="Blocks的实现" href="15668021082247.html">Blocks的实现</a></li>
                        
                          <li><a title="Block存储" href="15671439508053.html">Block存储</a></li>
                        
                          <li><a title="Block值捕获和__block总结" href="15651698942201.html">Block值捕获和__block总结</a></li>
                        
                          <li><a title="Block" href="15541369129721.html">Block</a></li>
                        

                    
                      <li class="side-title"><span>网络</span></li>
                        
                          <li><a title="NSURL" href="14968918049808.html">NSURL</a></li>
                        
                          <li><a title="使用 NSURLProtocol 拦截 HTTP 请求" href="15681830257275.html">使用 NSURLProtocol 拦截 HTTP 请求</a></li>
                        
                          <li><a title="OHHTTPStubs Mock网络请求" href="15681901666048.html">OHHTTPStubs Mock网络请求</a></li>
                        

                    
                      <li class="side-title"><span>fishhook</span></li>
                        
                          <li><a title="fishhook" href="15731958399871.html">fishhook</a></li>
                        

                    
                      <li class="side-title"><span>SDWebImage</span></li>
                        
                          <li><a title="SDWebImage源码分析" href="15732813859540.html">SDWebImage源码分析</a></li>
                        

                    
                      <li class="side-title"><span>AFNetworking</span></li>
                        
                          <li><a title="AFSecurityPolicy" href="15680194937623.html">AFSecurityPolicy</a></li>
                        
                          <li><a title="AFNetworkReachabilityManager" href="15680125238227.html">AFNetworkReachabilityManager</a></li>
                        
                          <li><a title="AFURLSerialization" href="15677400518331.html">AFURLSerialization</a></li>
                        
                          <li><a title="AFURLSessionManager" href="15676621460215.html">AFURLSessionManager</a></li>
                        
                          <li><a title="AFNetworking" href="15675682575589.html">AFNetworking</a></li>
                        

                    
                      <li class="side-title"><span>AsyncDisplayKit</span></li>
                        
                          <li><a title="Collections and asynchronous updates" href="15719000093976.html">Collections and asynchronous updates</a></li>
                        
                          <li><a title="Layout Specs" href="15710248960458.html">Layout Specs</a></li>
                        
                          <li><a title="Node Lifecycle" href="15707800044047.html">Node Lifecycle</a></li>
                        
                          <li><a title="线程" href="15707737201639.html">线程</a></li>
                        
                          <li><a title="Nodes" href="15698393226216.html">Nodes</a></li>
                        
                          <li><a title="Node Containers" href="15697458035343.html">Node Containers</a></li>
                        
                          <li><a title="先进技术" href="15697378626983.html">先进技术</a></li>
                        
                          <li><a title="工具" href="15695667474220.html">工具</a></li>
                        
                          <li><a title="优化" href="15694018519470.html">优化</a></li>
                        
                          <li><a title="Teture的便捷性" href="15693141187091.html">Teture的便捷性</a></li>
                        
                          <li><a title="Layout" href="15688983880412.html">Layout</a></li>
                        
                          <li><a title="子类" href="15686206334500.html">子类</a></li>
                        
                          <li><a title="Node" href="15686140907064.html">Node</a></li>
                        
                          <li><a title="智能预加载" href="15682782807154.html">智能预加载</a></li>
                        
                          <li><a title="Texture" href="15681914341057.html">Texture</a></li>
                        
                          <li><a title="AsyncDisplayKit" href="15645543599204.html">AsyncDisplayKit</a></li>
                        

                    
                      <li class="side-title"><span>ReactnativeCocoa</span></li>
                        
                          <li><a title="Reactive Cocoa Tutorial" href="15647325396059.html">Reactive Cocoa Tutorial</a></li>
                        
                          <li><a title="RACDelegateProxy" href="15611008346251.html">RACDelegateProxy</a></li>
                        
                          <li><a title="RACChannel" href="15609354619260.html">RACChannel</a></li>
                        
                          <li><a title="RACMulticastConnection: NSObject" href="15609234167437.html">RACMulticastConnection: NSObject</a></li>
                        
                          <li><a title="RACCommand: NSObject" href="15608261485816.html">RACCommand: NSObject</a></li>
                        
                          <li><a title="RACSignal信号的订阅与发送" href="15604257329990.html">RACSignal信号的订阅与发送</a></li>
                        
                          <li><a title="RACSignal" href="15578383647199.html">RACSignal</a></li>
                        
                          <li><a title="RACStream" href="15578193513091.html">RACStream</a></li>
                        
                          <li><a title="ReactObjc常用" href="15529084547270.html">ReactObjc常用</a></li>
                        
                          <li><a title="ReactiveObjC" href="15459662586152.html">ReactiveObjC</a></li>
                        
                          <li><a title="ReactiveObjC" href="15450317285396.html">ReactiveObjC</a></li>
                        
                          <li><a title="ReactiveCocoa 版本" href="15446921413334.html">ReactiveCocoa 版本</a></li>
                        
                          <li><a title="基础" href="15446723749030.html">基础</a></li>
                        

                    
                      <li class="side-title"><span>PromiseKit</span></li>
                        
                          <li><a title="官方文档" href="15718858302183.html">官方文档</a></li>
                        

                    
                      <li class="side-title"><span>项目监控</span></li>
                        
                          <li><a title="MatrixiOS学习" href="15560883411509.html">MatrixiOS学习</a></li>
                        
                          <li><a title="内存监控" href="15556458372058.html">内存监控</a></li>
                        
                          <li><a title="线程回溯和符号化" href="15560068598022.html">线程回溯和符号化</a></li>
                        
                          <li><a title="KSCrash" href="15559026860989.html">KSCrash</a></li>
                        
                          <li><a title="崩溃日志信息以及符号化" href="15560067896432.html">崩溃日志信息以及符号化</a></li>
                        
                          <li><a title="后台任务超时崩溃" href="15555568072278.html">后台任务超时崩溃</a></li>
                        
                          <li><a title="Crash收集" href="15559241621683.html">Crash收集</a></li>
                        
                          <li><a title="iOS模拟内存警告" href="15556552302925.html">iOS模拟内存警告</a></li>
                        

                    
                      <li class="side-title"><span>APP体积优化</span></li>
                        
                          <li><a title="Objective-C二进制瘦身" href="15822611342755.html">Objective-C二进制瘦身</a></li>
                        
                          <li><a title="包大小" href="15645609012102.html">包大小</a></li>
                        

                    
                      <li class="side-title"><span>启动优化</span></li>
                        
                          <li><a title="App启动优化" href="15771850071304.html">App启动优化</a></li>
                        
                          <li><a title="APP启动优化" href="15542146663946.html">APP启动优化</a></li>
                        

                    
                      <li class="side-title"><span>自动化测试</span></li>
                        
                          <li><a title="OCMock" href="14873831706932.html">OCMock</a></li>
                        
                          <li><a title="UI测试" href="14872305472033.html">UI测试</a></li>
                        
                          <li><a title="测试" href="14872162581601.html">测试</a></li>
                        
                          <li><a title="XCTest单元测试" href="14871449062159.html">XCTest单元测试</a></li>
                        

                    
                      <li class="side-title"><span>iOS-CoreAnimation</span></li>
                        
                          <li><a title="专用图层" href="14896343426276.html">专用图层</a></li>
                        
                          <li><a title="图层几何学、视觉效果" href="14892022301750.html">图层几何学、视觉效果</a></li>
                        
                          <li><a title="图层树和寄宿图" href="14883679213714.html">图层树和寄宿图</a></li>
                        
                          <li><a title="变换" href="14894054496048.html">变换</a></li>
                        
                          <li><a title="基于定时器的动画" href="14913623029277.html">基于定时器的动画</a></li>
                        
                          <li><a title="缓冲" href="14906168166224.html">缓冲</a></li>
                        
                          <li><a title="图层性能" href="14951065647732.html">图层性能</a></li>
                        
                          <li><a title="图层时间" href="14905958336865.html">图层时间</a></li>
                        
                          <li><a title="图像IO" href="14940350647350.html">图像IO</a></li>
                        
                          <li><a title="显式动画" href="14903384285214.html">显式动画</a></li>
                        
                          <li><a title="隐式动画" href="14901598468257.html">隐式动画</a></li>
                        
                          <li><a title="高效绘图" href="14939015823586.html">高效绘图</a></li>
                        
                          <li><a title="性能调优" href="14924196525709.html">性能调优</a></li>
                        
                          <li><a title="动画" href="14921642710849.html">动画</a></li>
                        
                          <li><a title="Core Animation" href="14892022094971.html">Core Animation</a></li>
                        
                          <li><a title="常用动画示例" href="14925128921601.html">常用动画示例</a></li>
                        

                    
                      <li class="side-title"><span>CoreGraphic</span></li>
                        
                          <li><a title="CGColor" href="15350923380421.html">CGColor</a></li>
                        
                          <li><a title="CGColorSpace" href="15350771796806.html">CGColorSpace</a></li>
                        
                          <li><a title="CGBlendMode" href="15350068830702.html">CGBlendMode</a></li>
                        

                    
                      <li class="side-title"><span>ARKit</span></li>
                        
                          <li><a title="实战:ARKit捕捉平面" href="15082392311480.html">实战:ARKit捕捉平面</a></li>
                        
                          <li><a title="ARCamera" href="15082385455420.html">ARCamera</a></li>
                        
                          <li><a title="ARSession" href="15082349866219.html">ARSession</a></li>
                        
                          <li><a title="ARSCNView" href="15082316038998.html">ARSCNView</a></li>
                        
                          <li><a title="ARKit框架API简介" href="15082286345415.html">ARKit框架API简介</a></li>
                        
                          <li><a title="SceneKit" href="15077240642559.html">SceneKit</a></li>
                        
                          <li><a title="ARKit" href="15077234771115.html">ARKit</a></li>
                        

                    
                      <li class="side-title"><span>git</span></li>
                        
                          <li><a title="Git" href="15284514278903.html">Git</a></li>
                        

                    
                      <li class="side-title"><span>Cocoapods</span></li>
                        
                          <li><a title="pod repo update" href="15556625620569.html">pod repo update</a></li>
                        
                          <li><a title="补充知识" href="15538424631757.html">补充知识</a></li>
                        
                          <li><a title="制作自己的Cocoapods" href="15535911821974.html">制作自己的Cocoapods</a></li>
                        
                          <li><a title="Cocoapods使用" href="15535750586068.html">Cocoapods使用</a></li>
                        

                    
                      <li class="side-title"><span>拾遗</span></li>
                        
                          <li><a title="" href="15724227215760.html"></a></li>
                        

                    
                      <li class="side-title"><span>Swift基础知识</span></li>
                        
                          <li><a title="高级运算符" href="15059300219793.html">高级运算符</a></li>
                        
                          <li><a title="访问控制" href="15057532270985.html">访问控制</a></li>
                        
                          <li><a title="内存安全" href="15660380397380.html">内存安全</a></li>
                        
                          <li><a title="自动引用计数" href="15028525854956.html">自动引用计数</a></li>
                        
                          <li><a title="不透明类型" href="15659410303124.html">不透明类型</a></li>
                        
                          <li><a title="泛型" href="15052932669633.html">泛型</a></li>
                        
                          <li><a title="协议" href="15047511695312.html">协议</a></li>
                        
                          <li><a title="扩展" href="15042587690391.html">扩展</a></li>
                        
                          <li><a title="嵌套类型" href="15042543172572.html">嵌套类型</a></li>
                        
                          <li><a title="类型转换" href="15037348375137.html">类型转换</a></li>
                        
                          <li><a title="错误处理" href="15034731740974.html">错误处理</a></li>
                        
                          <li><a title="可选链式调用" href="15031302948355.html">可选链式调用</a></li>
                        
                          <li><a title="析构过程" href="15025006795297.html">析构过程</a></li>
                        
                          <li><a title="构造过程" href="15020961612430.html">构造过程</a></li>
                        
                          <li><a title="继承" href="15018175799489.html">继承</a></li>
                        
                          <li><a title="下标" href="15017615739867.html">下标</a></li>
                        
                          <li><a title="方法" href="15017296324997.html">方法</a></li>
                        
                          <li><a title="属性" href="15015839505859.html">属性</a></li>
                        
                          <li><a title="类和结构体" href="15005513837564.html">类和结构体</a></li>
                        
                          <li><a title="枚举" href="15003778819226.html">枚举</a></li>
                        
                          <li><a title="闭包" href="14993105877642.html">闭包</a></li>
                        
                          <li><a title="函数 Functions" href="14986177362678.html">函数 Functions</a></li>
                        
                          <li><a title="控制流" href="14980952471508.html">控制流</a></li>
                        
                          <li><a title="集合类型" href="14978615246204.html">集合类型</a></li>
                        
                          <li><a title="字符串和字符" href="14976096897839.html">字符串和字符</a></li>
                        
                          <li><a title="Swift 基本运算符" href="14974389141976.html">Swift 基本运算符</a></li>
                        
                          <li><a title="Swift 基础部分" href="14968373667230.html">Swift 基础部分</a></li>
                        
                          <li><a title="swift简介" href="14966582354331.html">swift简介</a></li>
                        

                    
                      <li class="side-title"><span>计算机编程</span></li>
                        
                          <li><a title="网络通信" href="14982190720101.html">网络通信</a></li>
                        
                          <li><a title="C语言" href="14876675609253.html">C语言</a></li>
                        

                    
                      <li class="side-title"><span>JavaScript学习笔记</span></li>
                        

                    
                      <li class="side-title"><span>React-Native</span></li>
                        
                          <li><a title="Stack Navigation" href="15312926184354.html">Stack Navigation</a></li>
                        
                          <li><a title="混合开发(OC)" href="15304988629042.html">混合开发(OC)</a></li>
                        
                          <li><a title="组件属性一" href="15293961047296.html">组件属性一</a></li>
                        
                          <li><a title="补充" href="15290351401483.html">补充</a></li>
                        
                          <li><a title="导航页面" href="15289587744708.html">导航页面</a></li>
                        
                          <li><a title="状态机" href="15288713693530.html">状态机</a></li>
                        

                    
                      <li class="side-title"><span>Python</span></li>
                        
                          <li><a title="常见内置模块" href="15332875866545.html">常见内置模块</a></li>
                        
                          <li><a title="常用第三方模块" href="15331955872244.html">常用第三方模块</a></li>
                        
                          <li><a title="正则表达式" href="15331933928026.html">正则表达式</a></li>
                        
                          <li><a title="进程&&线程" href="15331071952550.html">进程&&线程</a></li>
                        
                          <li><a title="IO编程" href="15329386758024.html">IO编程</a></li>
                        
                          <li><a title="错误、调试、测试" href="15325716345284.html">错误、调试、测试</a></li>
                        
                          <li><a title="面对对象高级编程" href="15324890369623.html">面对对象高级编程</a></li>
                        
                          <li><a title="面对对象编程" href="15324145349319.html">面对对象编程</a></li>
                        
                          <li><a title="模块" href="15324005146874.html">模块</a></li>
                        
                          <li><a title="函数式编程" href="15320795459657.html">函数式编程</a></li>
                        
                          <li><a title="高级特性" href="15319012648780.html">高级特性</a></li>
                        
                          <li><a title="函数" href="15318121291068.html">函数</a></li>
                        
                          <li><a title="语句" href="15317414032911.html">语句</a></li>
                        
                          <li><a title="Python基础" href="15317258769792.html">Python基础</a></li>
                        

                    
                      <li class="side-title"><span>算法读书笔记</span></li>
                        
                          <li><a title="背包、队列、栈" href="15676039246412.html">背包、队列、栈</a></li>
                        
                          <li><a title="算法分析" href="15676055128194.html">算法分析</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>事件响应链</h1>

<p>参阅<a href="https://www.jianshu.com/p/b0884faae603">iOS事件处理，看我就够了~</a><br/>
参阅<a href="https://www.jianshu.com/p/c294d1bd963d">iOS触摸事件全家桶</a><br/>
参阅<a href="https://www.jianshu.com/p/df86508e2811">iOS 事件</a></p>

<h2 id="toc_0">触摸事件生成(触摸 &amp;&amp; 事件)</h2>

<h3 id="toc_1">UITouch</h3>

<ul>
<li>一个手指一次触摸屏幕，就对应生成一个UITouch对象。多个手指同时触摸屏幕，生成多个UITouch对象。</li>
<li>多个手指先后触摸，系统会根据触摸的位置判断是否更新同一个UITouch对象。若两个手指一前一后触摸同一个位置(即双击)，那么第一次触摸时生成一个UITouch对象，第二次触摸会更新这个UITouch对象，这是该UITouch对象的Tap Count属性值从1变成2，若两个手指一前一后触摸的位置不同，将会生成两个UITouch对象，两者之间没有联系</li>
<li>每个UITouch对象记录了触摸的一些信息，包括触摸时间、位置、阶段、所处的视图、窗口等信息。</li>
</ul>

<pre><code class="language-objectivec">// 触摸的各个阶段状态 
// 例如当手指移动时，会更新phase属性到UITouchPhaseMoved；
// 手指离屏后，更新到UITouchPhaseEnded
typedef NS_ENUM(NSInteger, UITouchPhase) {
    UITouchPhaseBegan,             // whenever a finger touches the surface.
    UITouchPhaseMoved,             // whenever a finger moves on the surface.
    UITouchPhaseStationary,        // whenever a finger is touching the surface but hasn&#39;t moved since the previous event.
    UITouchPhaseEnded,             // whenever a finger leaves the surface.
    UITouchPhaseCancelled,         // whenever a touch doesn&#39;t end but we need to stop tracking (e.g. putting device to face)
};
</code></pre>

<h3 id="toc_2">UIEvent</h3>

<p>触摸事件：<br/>
触摸的目的是生成触摸事件供响应者，一个触摸事件对应一个UIEvent对象，</p>

<p>UIEvent对象中的type属性标识了事件的类型</p>

<pre><code class="language-objectivec">typedef NS_ENUM(NSInteger, UIEventType) {
    UIEventTypeTouches, //touch事件
    UIEventTypeMotion, //运动事件
    UIEventTypeRemoteControl, //远程事件
    UIEventTypePresses NS_ENUM_AVAILABLE_IOS(9_0), //按压事件
};
</code></pre>

<p>UIEvent对象中包含了触发该对象的触摸对象集合</p>

<pre><code class="language-objectivec">@property(nonatomic, readonly, nullable) NSSet &lt;UITouch *&gt; *allTouches;
</code></pre>

<h3 id="toc_3">UIResponder</h3>

<p><code>UIResponder</code>是iOS中用于处理事件的API，不仅用于接收事件，还可以处理对应事件，如果当前响应者不能处理，就转发给其他响应者</p>

<p><code>UIResponder</code>类中包含了<code>touchesBegan</code>、<code>pressesBegan</code>、<code>motionBegan</code>、<code>remoteControlReceivedWithEvent</code>等方法，可以通过这些方法获取对应回调消息。</p>

<p>应用程序通过响应者来接收和处理事件，响应者可以是继承自<code>UIResponder</code>的任何子类，例如<code>UIView、UIViewController、UIApplication</code>等。当事件到来之际，系统会将事件传递给合适响应者，并成为<code>第一响应者</code>。如果<code>第一响应者</code>未处理事件，就会在响应者链中传递，其规则由<code>UIResponder</code>的<code>nextResponder</code>决定，可以通过重写该属性决定传递规则。当事件到来时，第一响应者没有接收消息，就顺着响应者链向后传递</p>

<h2 id="toc_4">Hit-Test 寻找第一响应者</h2>

<p>当点击屏幕上的view时，UIKit会打包一个<code>UIEvent</code>对象，将其分发给正在活跃的app，放在当前<code>Application</code>维护的事件队列中<br/>
此时app的<code>UIApplication</code>单例对象就会从事件队列中获取最新的事件，然后分发给能处理该事件的对象。此时app的任务就是获取能够响应该事件的UIView了 这就是通过<code>HitTest</code>的作用了</p>

<h3 id="toc_5">Hit-Test</h3>

<p><code>- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event;</code> <br/>
<code>- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event;</code>//判断点击区域是否在视图上，是则返回YES，不是返回NO</p>

<p><code>hitTest:withEvent:</code>方法内部会调用<code>pointInSide:withEvent:</code>方法，</p>

<p>具体流程：</p>

<ul>
<li><code>UIApplication</code>将事件传递给窗口对象<code>UIWindow</code>，优先询问后显示的窗口</li>
<li>如果<code>Window</code>不能响应事件，将事件传递给其它窗口；若窗口能响应事件，则<mark>从后向前</mark>(添加视图的逆序)询问窗口的子视图</li>
<li>类推，如果视图不响应事件，将其传递给同级的上一个视图，如果能响应，就遍历其子视图</li>
<li>如果其子视图都不能响应，则当前视图就是最合适的响应者</li>
</ul>

<p><code>hitTest:withEvent:</code>返回一个UIView对象,作为当前视图层次中的响应者。</p>

<p>其可能的实现为下：</p>

<pre><code class="language-objectivec">- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event{
    //3种状态无法响应事件
     if (self.userInteractionEnabled == NO || self.hidden == YES ||  self.alpha &lt;= 0.01) return nil; 
    //触摸点若不在当前视图上则无法响应事件
    if ([self pointInside:point withEvent:event] == NO) return nil; 
    //从后往前遍历子视图数组 
    int count = (int)self.subviews.count; 
    for (int i = count - 1; i &gt;= 0; i--) 
    { 
        // 获取子视图
        UIView *childView = self.subviews[i]; 
        // 坐标系的转换,把触摸点在当前视图上坐标转换为在子视图上的坐标
        CGPoint childP = [self convertPoint:point toView:childView]; 
        //询问子视图层级中的最佳响应视图
        UIView *fitView = [childView hitTest:childP withEvent:event]; 
        if (fitView) 
        {
            //如果子视图中有更合适的就返回
            return fitView; 
        }
    } 
    //没有在子视图中找到更合适的响应视图，那么自身就是最合适的
    return self;
}
</code></pre>

<blockquote>
<p>注意：在log事件调用时，其视图hitTest和pointInSide方法会按照顺序调用两次</p>
</blockquote>

<h4 id="toc_6">视图无法响应事件的条件：</h4>

<ol>
<li>UIView的几种无法响应事件：
<ul>
<li>不允许交互：<code>userInteractionEnabled = NO</code></li>
<li>隐藏： <code>hidden = YES</code> 如果父视图隐藏 则子视图一会隐藏</li>
<li>透明度： alpha&lt;0.01  视图在0~0.01之间为透明  也会影响子视图透明度</li>
</ul></li>
<li>通过<code>pointInSide</code>的判断</li>
</ol>

<h2 id="toc_7">事件传递</h2>

<p>经过hit-test过程  UIApplication已经知道<code>第一响应者</code>，接下来</p>

<ul>
<li>将事件传递给第一响应者</li>
<li>将事件沿着响应链传递</li>
</ul>

<p><code>UIApplication</code>通过<code>sendEvent:</code>传递给事件所属window，然后window在通过<code>snedEvent:</code>将事件传递给<code>hit-tested View</code>即第一响应者</p>

<pre><code class="language-objectivec">//UIWindow
- (void)sendEvent:(UIEvent *)event;                    // called by UIApplication to dispatch events to views inside the window
</code></pre>

<p>通过在touchBegan的断点可以看到调用栈<br/>
<img src="media/15823466354492/15825512400627.jpg" alt="" style="width:625px;"/><br/>
其中window将UIEvent对象直接发送给对应hit-test View</p>

<blockquote>
<p>这是因为在hit-test过程时 将对应信息(对应的window和view)已经存入了UIEvent中的UITouch对象中</p>

<pre><code class="language-objectivec">//UITouch 的属性
@property(nullable,nonatomic,readonly,strong) UIWindow                        *window;
@property(nullable,nonatomic,readonly,strong) UIView                          *view;
</code></pre>
</blockquote>

<h3 id="toc_8">事件沿着响应链传递</h3>

<p>因为每个响应者一定是<code>UIRsponder</code>对象，其继承了4个响应触摸方法</p>

<pre><code class="language-objectivec">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event;
- (void)touchesMoved:(NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event;
- (void)touchesEnded:(NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event;
- (void)touchesCancelled:(NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event;
- (void)touchesEstimatedPropertiesUpdated:(NSSet&lt;UITouch *&gt; *)touches API_AVAILABLE(ios(9.1));
</code></pre>

<p>默认不做任何处理 只是将事件沿着<code>响应链</code>(不是父类)传递<br/>
<code>第一响应者</code>首先收到触摸事件，具有对触摸事件处理权，可以自己对其进行处理(通过重写该方法)，也可以将事件沿着响应链传递给<code>下个响应者</code>，这个由<code>响应者</code>之间构成的<code>视图链</code>就称为<code>响应链</code>(因此响应的过程为自上向下的)</p>

<p>响应者对事件处理：<br/>
<mark>响应者对事件的拦截和传递都是通过<code>touchesBegan:withEvent:</code>方法控制的，即只有能执行到该方法,才能有可能获取其它3个触摸事件方法</mark></p>

<ul>
<li>不拦截,即不重写该方法，默认沿着响应链传递 </li>
<li>拦截， 重写<code>touchesBegan:withEvent:</code>，并不将事件向下传递</li>
<li>拦截，重写<code>touchesBegan:withEvent:</code>， 但再方法内部执行<code>[super touchesBegan:withEvent:]</code> 将方法向下传递</li>
</ul>

<h4 id="toc_9">传递规则</h4>

<p>每个<code>UIResponder</code>都有下一个<code>nextResponder</code>，获取响应链中的下个响应者</p>

<p>如下图所示，因为响应链上的前两个响应者未响应<code>began</code>方法，因此默认调用<code>[UIResponder touchesBegan:withEvent:]</code>方法，方法内部调用<code>[super touchesBegan:withEvent:]</code>则执行<code>fowardTouchMethod</code><br/>
<img src="media/15823466354492/15825536407581.jpg" alt="" style="width:830px;"/></p>

<ul>
<li>UIView<br/>
若视图是控制器的根视图，则其nextResponder为控制器对象；否则，其nextResponder为父视图。</li>
<li>UIViewController<br/>
若控制器的视图是window的根视图，则其nextResponder为窗口对象；若控制器是从别的控制器present出来的，则其nextResponder为presenting view controller。</li>
<li>UIWindow<br/>
nextResponder为UIApplication对象</li>
<li>UIApplication<br/>
若当前应用的app delegate是一个UIResponder对象，且不是UIView、UIViewController或app本身，则UIApplication的nextResponder为app delegate</li>
</ul>

<blockquote>
<p>可以通过<code>responder.nextResponder</code>获取响应链中的所有响应对象</p>
</blockquote>

<h2 id="toc_10">UIGestureRecognizer 手势</h2>

<p>手势分为 <code>离散型手势</code>和<code>持续型手势</code>.系统提供的点按手势<code>UITapGestureRecognizer</code>和轻扫手势<code>UISwipeGestureRecongnizer</code>，其余的均为持续型手势。</p>

<p>主要区别在于其状态变化的过程</p>

<pre><code class="language-text">//离散型

识别成功: Possible-&gt;Recongnized
识别失败: Possible-&gt;Failed

//持续型
完整识别: Possible-&gt;Began-&gt;[Changed]-&gt;Ended
不完整识别: Possible-&gt;Began-&gt;[Changed]-&gt;Cancel
</code></pre>

<p><img src="media/15823466354492/15827277237498.jpg" alt="" style="width:267px;"/><br/>
我们自定义了<code>FSTapView、</code><code>FSLongPressView、</code><code>FSTapGestureRecognizer、</code><code>FSLongPressGestureRecognizer、</code><code>FSButton</code>和<code>FSControl</code>并在类内部 重写4个事件处理方法，打印其方法执行，<mark>注意</mark>在重写方法最后调用super进行继续分发</p>

<blockquote>
<p>GestureRecognizer虽然不是继承自UIResponder但是内部也有事件处理方法 会在接下来介绍<br/>
如果在GestureRecognizer接收到TouchEvent事件而没有调用super继续分发 则会导致该手势识别失败</p>
</blockquote>

<h3 id="toc_11">离散手势</h3>

<p>点点击添加了自定义点按视图时<br/>
<img src="media/15823466354492/15827327818395.jpg" alt="" style="width:1116px;"/><br/>
<img src="media/15823466354492/15827327970288.jpg" alt="" style="width:1096px;"/></p>

<p><img src="media/15823466354492/15827326493908.jpg" alt="" style="width:1095px;"/></p>

<pre><code class="language-objectivec">2020-02-26 22:48:34.999518+0800 Hit-Testing_Learn[36770:469711] -[FSTapGestureRecognizer touchesBegan:withEvent:]
2020-02-26 22:48:35.000166+0800 Hit-Testing_Learn[36770:469711] -[TapView touchesBegan:withEvent:]
2020-02-26 22:48:35.001275+0800 Hit-Testing_Learn[36770:469711] -[FSTapGestureRecognizer touchesEnded:withEvent:]
2020-02-26 22:48:35.001735+0800 Hit-Testing_Learn[36770:469711] -[ViewController2 tapEvent:]
2020-02-26 22:48:35.001915+0800 Hit-Testing_Learn[36770:469711] -[TapView touchesCancelled:withEvent:]
</code></pre>

<p>可以看到</p>

<ul>
<li><code>UIWindow</code>将事件传递给第一响应者<code>TapView</code>前，将事件传递给了手势<code>FSTapGestureRecognizer</code></li>
<li>若手势识别成功(即收到了<code>touchesBegan和touchesEnded</code>事件),则取消第一响应者对事件响应<code>[TapView touchesCancelled:withEvent:]</code></li>
<li>若手势识别未成功，第一响应者接手对事件进行处理</li>
</ul>

<p>注意:</p>

<blockquote>
<p>对于<code>FSTapGestureRecognizer</code>必须对<code>touchesBegan和touchesEnded</code>方法调用super继续,否则会导致手势识别失败<br/>
对于手势识别器调用super并不是让其向下一个手势识别器传递事件，测试可得不论是否使用super 所有手势识别器都可以收到touch事件. 即window发送事件会将事件发送到所有的UItouch的数组中的所有手势识别器，发送并没有什么特定顺序，只有一个可以识别成功，并且当其识别成功其余的识别器则会全部失败，只有所有的手势识别器都识别失败，hit-testView 才可以接收触摸事件</p>

<p>//TODO:<br/>
对于在添加了点按手势的视图上move 如果不超过视图范围，则手势和视图都可以收到move事件，如果在视图范围里离开手指？ 如果在视图范围外离开手指？如果超过一段时间?</p>
</blockquote>

<p>因此，可以得出结论 <mark>UIGestureRecognizer比UIResponder具有更高的事件响应的优先级</mark></p>

<p>在苹果官方文档也有这么一段话：</p>

<pre><code class="language-text">window将事件传递给手势识别器，然后将其传递给hit-test的添加了手势的视图。假如手势识别器以多点触摸顺序分析触摸流，但是并没有识别出其手势，则View将接收所有touch。如果手势识别器识别出手势，则将取消视图的其余touch。手势识别的常规操作顺序遵循以下路径，路径由`cancelsTouchesInView``delaysTouchesBegan``delaysTouchesEnded`属性的默认值确定
</code></pre>

<p><img src="media/15823466354492/15827311973724.jpg" alt="" style="width:678px;"/><br/>
UIGestureRecognizer对事件的响应也是通过touch相关的4个方法来实现的，但是其并不是继承自UIResponder而是NSObject，而这4个方法声明在UIGestureRecognizerSubclass.h中。</p>

<p><code>UIWindow</code>之所以知道把时间传递给那些手势识别器，主要通过<code>UIEvent</code>的Touch中的<code>gestureRecognizers</code>数组，而这个数组也是hit-test View寻找第一响应者过程中填充的。</p>

<p>UIWindow会取出UIEvent里面的gestureRecognizers数组的手势识别器，将事件传递给各个手势识别器，如果有一个手势识别器识别了事件，其他的手势识别器就不会响应该事件。</p>

<p>因为<code>手势识别器</code>识别事件，需要一定时间，因此<code>tapView</code>会先调用<code>touchbegan</code>，而因为手势识别器识别成功，则<code>UIApplication</code>向tapView发送取消(cancel)事件响应</p>

<h3 id="toc_12">持续型手势</h3>

<pre><code class="language-objectivec">2020-02-27 00:10:36.580259+0800 Hit-Testing_Learn[38200:533365] -[FSLongPressGestureRecognizer touchesBegan:withEvent:]
2020-02-27 00:10:36.581306+0800 Hit-Testing_Learn[38200:533365] -[LongPressView touchesBegan:withEvent:]
2020-02-27 00:10:37.582065+0800 Hit-Testing_Learn[38200:533365] -[ViewController2 longPressEvent:]
2020-02-27 00:10:37.582259+0800 Hit-Testing_Learn[38200:533365] state --- 1
2020-02-27 00:10:37.582529+0800 Hit-Testing_Learn[38200:533365] -[LongPressView touchesCancelled:withEvent:]
2020-02-27 00:10:37.660837+0800 Hit-Testing_Learn[38200:533365] -[ViewController2 longPressEvent:]
2020-02-27 00:10:37.661041+0800 Hit-Testing_Learn[38200:533365] state --- 2
2020-02-27 00:10:37.661267+0800 Hit-Testing_Learn[38200:533365] -[ViewController2 longPressEvent:]
2020-02-27 00:10:37.661449+0800 Hit-Testing_Learn[38200:533365] state --- 2
2020-02-27 00:10:37.773423+0800 Hit-Testing_Learn[38200:533365] -[ViewController2 longPressEvent:]
2020-02-27 00:10:37.773574+0800 Hit-Testing_Learn[38200:533365] state --- 2
2020-02-27 00:10:37.949981+0800 Hit-Testing_Learn[38200:533365] -[ViewController2 longPressEvent:]
2020-02-27 00:10:37.950156+0800 Hit-Testing_Learn[38200:533365] state --- 2
2020-02-27 00:10:37.957969+0800 Hit-Testing_Learn[38200:533365] -[ViewController2 longPressEvent:]
2020-02-27 00:10:37.958148+0800 Hit-Testing_Learn[38200:533365] state --- 2
2020-02-27 00:10:37.967924+0800 Hit-Testing_Learn[38200:533365] -[FSLongPressGestureRecognizer touchesEnded:withEvent:]
2020-02-27 00:10:37.968218+0800 Hit-Testing_Learn[38200:533365] -[ViewController2 longPressEvent:]
2020-02-27 00:10:37.968356+0800 Hit-Testing_Learn[38200:533365] state --- 3
</code></pre>

<p><img src="media/15823466354492/15827335289202.jpg" alt="" style="width:1343px;"/></p>

<p><img src="media/15823466354492/15827335827964.jpg" alt="" style="width:1340px;"/></p>

<p><img src="media/15823466354492/15827336077836.jpg" alt="" style="width:1297px;"/></p>

<p>在堆栈可以看出，第一次调用时在runloop中通知监听的手势识别器的观察者，对其长按事件进行相应，此时state为<code>UIGestureRecognizerStateBegan</code></p>

<p>第二次、第三次调用是UIWindow 先将事件传递给UIEvent的gestureRecognizers数组里的手势识别器，然后长按手势识别器FJFLongPressGestureRecognizer识别成功进行回调,此时手势识别器的state为UIGestureRecognizerStateChanged 和 UIGestureRecognizerStateEnded。</p>

<h3 id="toc_13">总结</h3>

<p>当触摸发生或者触摸的状态发生变化时，UIWindow都会传递事件寻求响应。</p>

<p>-UIWindow先将触摸事件传递给响应链上绑定的手势识别器，再发送给触摸对象对应的第一响应者。</p>

<ul>
<li><p>手势识别器识别手势期间，若触摸对象的触摸状态发生变化，事件都是先发送给手势识别器，再发送给第一响应者。</p></li>
<li><p>手势识别器如果成功识别手势，则通知UIApplication取消第一响应者对于事件的响应，并停止向第一响应者发送事件。</p></li>
<li><p>如果手势识别器未能识别手势，而此时触摸并未结束，则停止向手势识别器发送事件，仅向第一响应者发送事件。</p></li>
<li><p>如果手势识别器未能识别手势，且此时触摸已经结束，则向第一响应者发送end状态的touch事件，以停止对事件的响应。</p></li>
</ul>

<h3 id="toc_14">拓展</h3>

<p>在<code>UIGestureRecognizer</code>中存在以下3个属性</p>

<pre><code class="language-objectivec">@property(nonatomic) BOOL cancelsTouchesInView;       // default is YES. causes touchesCancelled:withEvent: or pressesCancelled:withEvent: to be sent to the view for all touches or presses recognized as part of this gesture immediately before the action method is called.
@property(nonatomic) BOOL delaysTouchesBegan;         // default is NO.  causes all touch or press events to be delivered to the target view only after this gesture has failed recognition. set to YES to prevent views from processing any touches or presses that may be recognized as part of this gesture
@property(nonatomic) BOOL delaysTouchesEnded;         // default is YES.  仅在此手势识别失败后，才将touchesEnded或pressesEnded事件传递到目标视图。 这样可以确保如果识别出手势，可以取消手势的触摸或按动
</code></pre>

<ol>
<li><p>cancelsTouchesInView</p>
<p>默认为YES。表示当手势识别器成功识别了手势之后，会通知Application取消响应链对事件的响应，并不再传递事件给第一响应者。若设置成NO，表示手势识别成功后不取消响应链对事件的响应，事件依旧会传递给第一响应者</p></li>
<li><p>delaysTouchesBegan <br/>
默认为NO。默认情况下手势识别器在识别手势期间，当触摸状态发生改变时，Application都会将事件传递给手势识别器和第一响应者；若设置成YES，则表示手势识别器在识别手势期间，截断事件，即不会将事件发送给第一响应者。</p></li>
<li><p>delaysTouchesEnded<br/>
默认为YES。当手势识别失败时，若此时触摸已经结束，会延迟一小段时间（0.15s）再调用响应者的touchesEnded:withEvent:；若设置成NO，则在手势识别失败时会立即通知Application发送状态为end的touch事件给第一响应者以调用 touchesEnded:withEvent:结束事件响应</p></li>
</ol>

<h2 id="toc_15">UIControl</h2>

<p><code>UIControl</code>是系统提供的能够以<code>target-action</code>模式处理触摸事件的控件，iOS中UIButton、UISegmentedControl、UISwitch等都是其子类<br/>
因为 UIControl是UIView子类，因此本身也具有<code>UIResponder</code>身份</p>

<p><code>UIControl</code>作为控件类的基类，它是一个<code>抽象基类</code>，我们不能直接使用UIControl类来实例化控件，它只是为控件子类定义一些通用的接口，并提供一些基础实现，以在事件发生时，预处理这些消息并将它们发送到指定目标对象上。</p>

<h3 id="toc_16">Target-Action机制</h3>

<p>当事件将要发生时，事件会被发送到控件对象，然后控件对象触发target对象上的action行为，最终处理事件。<br/>
<code>UIControl</code>能够响应事件的控件，必须也需要事件交互符合条件才去响应，因此也会追踪事件发生的过程。和<code>UIResponder</code>以及<code>UIGestureRecongnizer</code>通过<code>touches</code>系列方法追踪，<code>UIControl</code>有独特的追踪方式:</p>

<pre><code class="language-objectivec">- (BOOL)beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event {
    NSLog(@&quot;%s&quot;,__func__);
    return YES;
}
- (BOOL)continueTrackingWithTouch:(UITouch *)touch withEvent:(nullable UIEvent *)event {
    NSLog(@&quot;%s&quot;,__func__);
    return YES;
}
- (void)endTrackingWithTouch:(nullable UITouch *)touch withEvent:(nullable UIEvent *)event {
    NSLog(@&quot;%s&quot;,__func__);
}// touch is sometimes nil if cancelTracking calls through to this.
- (void)cancelTrackingWithEvent:(nullable UIEvent *)event {
    NSLog(@&quot;%s&quot;,__func__);
}   // event may be nil if cancelled for non-event reasons, e.g. removed from window
</code></pre>

<p>这4个方法和<code>UIResponder</code>的方法几乎温和,只是<code>UIControl</code>只能接收单点触控，因此参数是单个<code>UITouch</code>对象。和UIResponder职能类似，也是为了跟踪触摸的开始、滑动、结束、取消。不过，<code>UIControl</code>本身也是<code>UIResponder</code>，因此同样有touches系列的4个方法，事实上，UIControl的<code>Tracking</code>系列方法是在touch系列方法内部调用的。因此，UIControl中<code>touches</code>系列方法的默认实现和UIResponder还是有区别的</p>

<pre><code class="language-objectivec">2020-02-28 00:20:48.544827+0800 Hit-Testing_Learn[65809:1215013] -[FSTapGestureRecognizer touchesBegan:withEvent:]
2020-02-28 00:20:48.545294+0800 Hit-Testing_Learn[65809:1215013] -[FSButton touchesBegan:withEvent:]
2020-02-28 00:20:48.545425+0800 Hit-Testing_Learn[65809:1215013] -[FSButton beginTrackingWithTouch:withEvent:]
2020-02-28 00:20:48.545971+0800 Hit-Testing_Learn[65809:1215013] -[FSTapGestureRecognizer touchesEnded:withEvent:]
2020-02-28 00:20:48.546185+0800 Hit-Testing_Learn[65809:1215013] -[FSButton touchesEnded:withEvent:]
2020-02-28 00:20:48.546290+0800 Hit-Testing_Learn[65809:1215013] -[FSButton endTrackingWithTouch:withEvent:]
2020-02-28 00:20:48.546447+0800 Hit-Testing_Learn[65809:1215013] -[ViewController2 btnClickEvent:]
</code></pre>

<p><img src="media/15823466354492/15828208315732.jpg" alt="" style="width:1107px;"/><br/>
<img src="media/15823466354492/15828208589479.jpg" alt="" style="width:1084px;"/></p>

<ul>
<li>可以看到，Window先将时间传递给手势识别器，再传递给第一响应者<code>FSButton</code></li>
<li>手势识别器和第一响应者分别调用touch相关方法对事件进行识别</li>
<li><mark>最终第一响应者对事件进行相应调用<code>sendAction:to:forEvent</code>将target和action发送给UIApplication,UIApplication通过<code>sendAction:to:from:forevent</code>向target发送action</mark></li>
</ul>

<p>再来看自定义继承UIControl的<code>FSControl</code></p>

<pre><code class="language-objectivec">2020-02-28 00:32:26.644690+0800 Hit-Testing_Learn[66062:1228563] -[FSTapGestureRecognizer touchesBegan:withEvent:]
2020-02-28 00:32:26.645519+0800 Hit-Testing_Learn[66062:1228563] -[FSControl touchesBegan:withEvent:]
2020-02-28 00:32:26.645689+0800 Hit-Testing_Learn[66062:1228563] -[FSControl beginTrackingWithTouch:withEvent:]
2020-02-28 00:32:26.646929+0800 Hit-Testing_Learn[66062:1228563] -[FSTapGestureRecognizer touchesEnded:withEvent:]
2020-02-28 00:32:26.647320+0800 Hit-Testing_Learn[66062:1228563] -[ViewController2 tapEvent:]
2020-02-28 00:32:26.647492+0800 Hit-Testing_Learn[66062:1228563] -[FSControl touchesCancelled:withEvent:]
2020-02-28 00:32:26.647634+0800 Hit-Testing_Learn[66062:1228563] -[FSControl cancelTrackingWithEvent:]
</code></pre>

<p>此时结果和之前的<code>FSButton</code>优先级比手势识别器高截然相反，优先级竟然更低了</p>

<p>经过验证:<br/>
系统提供的有默认action操作的<code>UIControl</code>，例如<code>UIbutton、UISwitch</code>等的单击，<code>UIControl</code>的响应优先级比手势识别器高,而对于自定义的<code>UIControl</code>，响应的优先级比手势低<br/>
至于为什么会这样，没找到具体原因，但测试的结果，推测系统应该是依据UITouch的touchIdentifier来进行区别处理</p>

<h4 id="toc_17">target-action管理</h4>

<pre><code class="language-objectivec">
// 添加
- (void)addTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents
 // 删除
- (void)removeTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents

// 获取控件对象所有相关的target对象
// get info about target &amp; actions. this makes it possible to enumerate all target/actions by checking for each event kind
// 集合中可能包含NSNull 表明至少有一个nil目标对象
@property(nonatomic,readonly) NSSet *allTargets; 

- (nullable NSArray&lt;NSString *&gt; *)actionsForTarget:(nullable id)target forControlEvent:(UIControlEvents)controlEvent;    // single event. returns NSArray of NSString selector names. returns nil if none
</code></pre>

<p><code>UIControl</code>内部实际上有一个可变数组来保存<code>Target-Action</code>，数组中每个元素都是<code>UIControlTargetAction</code>对象。该类是私有类</p>

<pre><code class="language-objectivec">@interface UIControlTargetAction : NSObject {
    SEL _action;
    BOOL _cancelled;
    unsigned int _eventMask;// 事件类型,比如:UIControlEventTouchUpInside
    id _target;
}
</code></pre>

<h2 id="toc_18">总结  事件完整响应链</h2>

<ol>
<li>系统通过<code>IOKit.framework</code>来处理硬件操作，其中屏幕处理也通过IOKit完成(IOKit可能是注册监听了屏幕输出的端口)<br/>
当用户操作屏幕，IOKit收到屏幕操作，会将这次操作封装为IOHIDEvent对象。通过mach port(IPC进程间通信)将事件转发给SpringBoard来处理</li>
<li>SpringBoard是iOS系统的桌面程序。SpringBoard收到mach port发过来的事件，唤醒main runloop来处理</li>
<li>main runloop将事件交给source1处理，<code>source1</code>会调用<code>__IOHIDEventSystemClientQueueCallback()</code>函数<br/>
该函数会在内部判断是否有程序在前台显示，如果有通过<code>mach port</code>将<code>IOHIDEvent</code>事件转发给这个程序<br/>
如果前台没有程序在显示，则表明SpringBoard的桌面程序在前台显示，也就是用户在桌面进行了操作。<code>__IOHIDEventSystemClientQueueCallback()</code>函数会将事件交给<code>source0</code>处理，<code>source0</code>会调用<code>__UIApplicationHandleEventQueue()</code>函数，函数内部会做具体的处理操作</li>
<li>例如用户点击了某个应用程序的icon，会将这个程序启动。<br/>
应用程序接收到<code>SpringBoard</code>传来的消息，会唤醒<code>main runloop</code>并将这个消息交给source1处理，source1调用<code>__IOHIDEventSystemClientQueueCallback()</code>函数，在函数内部会将事件交给<code>source0</code>处理，并调用source0的<code>__UIApplicationHandleEventQueue()</code>函数。在__UIApplicationHandleEventQueue()函数中，会将传递过来的<code>IOHIDEvent</code>转换为<code>UIEvent</code>对象</li>
<li>在函数内部，将事件放入UIApplication的事件队列，等到处理该事件时，将该事件出队列，UIApplication将事件传递给窗口对象(UIWindow)，如果存在多个窗口，则从后往前询问最上层显示的窗口</li>
<li>窗口UIWindow通过hitTest和pointInside操作，判断是否可以响应事件，如果窗口UIWindow不能响应事件，则将事件传递给其他窗口；若窗口能响应事件，则从后往前询问窗口的子视图。</li>
<li>以此类推，如果当前视图不能响应事件，则将事件传递给同级的上一个子视图；如果能响应，就从后往前遍历当前视图的子视图</li>
<li>如果当前视图的子视图都不能响应事件，则当前视图就是第一响应者</li>
<li>找到第一响应者，事件的传递的响应链也就确定的</li>
<li>如果第一响应者非UIControl子类且响应链上也没有绑定手势识别器<code>UIGestureRecognizer</code>;</li>
<li>那么由于第一响应者具有处理事件的最高优先级，因此UIApplication会先将事件传递给它供其处理。首先，<code>UIApplication</code>将事件通过<code>sendEvent:</code>传递给事件所属的window，window同样通过<code>sendEvent:</code>再将事件传递给<code>hit-tested view</code>，即第一响应者,第一响应者具有对事件的完全处理权，默认对事件不进行处理，传递给下一个响应者(nextResponder)；如果响应链上的对象一直没有处理该事件，则最后会交给<code>UIApplication</code>，如果UIApplication实现代理，会交给<code>UIApplicationDelegate</code>，如果<code>UIApplicationDelegate</code>没处理，则该事件会被丢弃</li>
<li>如果第一响应者非UIControl子类但响应链上也绑定了手势识别器<code>UIGestureRecognizer</code></li>
<li>UIWindow会将事件先发送给响应链上绑定的手势识别器<code>UIGestureRecognizer</code>，再发送给第一响应者，如果手势识别器能成功识别事件，UIApplication默认会向第一响应者发送cancel响应事件的命令;如果手势识别器未能识别手势，而此时触摸并未结束，则停止向手势识别器发送事件，仅向第一响应者发送事件。如果手势识别器未能识别手势，且此时触摸已经结束，则向第一响应者发送end状态的touch事件，以停止对事件的响应</li>
<li>如果第一响应者是自定义的UIControl的子类同时响应链上也绑定了手势识别器<code>UIGestureRecognizer</code>;这种情况跟第一响应者非UIControl子类但响应链上也绑定了手势识别器<code>UIGestureRecognizer</code>处理逻辑一样</li>
<li>如果第一响应者是UIControl的子类且是系统类(UIButton、UISwitch)同时响应链上也绑定了手势识别器<code>UIGestureRecognizer</code></li>
<li>UIWindow会将事件先发送给响应链上绑定的手势识别器<code>UIGestureRecognizer</code>，再发送给第一响应者，如果第一响应者能响应事件，UIControl调用调用<code>sendAction:to:forEvent:</code>将target、action以及event对象发送给UIApplication，UIApplication对象再通过<code>sendAction:to:from:forEvent:</code>向target发送action</li>
</ol>

<h2 id="toc_19">示例：</h2>

<h3 id="toc_20">超出子视图范围</h3>

<p><img src="media/15823466354492/15824747327255.jpg" alt="" style="width:219px;"/><br/>
此时 当点击btn不在BView时，并不起作用，因为点击的点在btn的父视图Bview外 则事件无法传递到btn，如果想要点击外部区域也起作用</p>

<pre><code class="language-objectivec">//在BView重写
//处理超出区域点击无效的问题
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    
    if (self.isHidden == NO) {
        // 转换坐标
        CGPoint newPoint = [self convertPoint:point toView:self.btn];
        // 判断点击的点是否在按钮区域内
        if ( [self.btn pointInside:newPoint withEvent:event]) {
            //返回按钮
            return self.btn;
        }else{
            return [super hitTest:point withEvent:event];
        }
    }
    else {
        return [super hitTest:point withEvent:event];
    }
}
</code></pre>

<h3 id="toc_21">想要扩大视图的点击范围</h3>

<p>假如想要扩大按钮的点击范围</p>

<pre><code class="language-objectivec">//TabBar
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {
    //将触摸点坐标转换到在CircleButton上的坐标
    CGPoint pointTemp = [self convertPoint:point toView:self.indicateView];
    //若触摸点在CricleButton上则返回YES
    if ([self.indicateView pointInside:pointTemp withEvent:event]) {
        return YES;
    }
    //否则返回默认的操作
    return [super pointInside:point withEvent:event];
}
</code></pre>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="15828224173019.html"  title="Previous Post: 类簇">&laquo; 类簇</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="15822611342755.html" 
	        title="Next Post: Objective-C二进制瘦身">Objective-C二进制瘦身 &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '15823466354492.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    


  </body>
</html>
